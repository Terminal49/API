---
title: Create a Tracking Request
description: Submit a new tracking request to monitor shipments via bill of lading, booking number, or container number.
icon: "magnifying-glass-chart"
---

# Create a Tracking Request

**Endpoint:** `POST /v2/tracking_requests`

Creates a tracking request to begin monitoring a shipment or container. Terminal49 will attempt to locate the shipment or container using the provided reference number and carrier information. Once successfully located, tracking will commence, and you'll receive updates as the shipment progresses.

## Endpoint Overview

| Field | Value |
| ----- | ----- |
| **HTTP Method** | POST |
| **Endpoint** | `/v2/tracking_requests` |
| **Content-Type** | `application/vnd.api+json` |
| **Authentication** | API Key (required) |
| **Rate Limit** | [See rate limiting documentation](/api-docs/in-depth-guides/rate-limiting) |

## Business Use Cases

- **Initial Tracking Setup**: Start tracking a new container shipment when you receive a bill of lading or booking confirmation
- **Customer Onboarding**: Quickly set up tracking for a customer's shipments when they provide their shipping documents
- **Bulk Import**: Programmatically submit multiple tracking requests to monitor your entire inventory in transit
- **Proactive Monitoring**: Establish tracking early in the shipping cycle to receive timely updates

## Request Parameters

### Headers

| Header | Value | Required |
| ------ | ----- | -------- |
| `Authorization` | `Token YOUR_API_KEY` | Yes |
| `Content-Type` | `application/vnd.api+json` | Yes |

### Request Body

<ParamField body="data.type" type="string" required>
  Resource type, must be `tracking_request`
</ParamField>

<ParamField body="data.attributes.request_type" type="string" required>
  The type of reference number being provided:
  - `container`: A container number (including carrier prefix)
  - `bill_of_lading`: A Master Bill of Lading (MBL) number
  - `booking`: A booking number provided by the carrier
</ParamField>

<ParamField body="data.attributes.request_number" type="string" required>
  The identifier for the shipment or container. Format depends on the request_type:
  - For containers: Typically 11 characters (e.g., MSCU1234567)
  - For bill of lading numbers: Format varies by carrier but should match the format on shipping documents
  - For booking numbers: Alphanumeric format provided by the carrier
</ParamField>

<ParamField body="data.attributes.scac" type="string">
  The Standard Carrier Alpha Code (SCAC) identifying the ocean carrier. While optional, providing this significantly improves tracking success rates. See the [Supported Carriers](/api-docs/useful-info/api-data-sources-availability) documentation for a list of supported SCAC codes.
</ParamField>

<ParamField body="data.attributes.ref_numbers" type="array">
  Optional array of reference numbers like purchase orders, customer references, or other identifiers associated with this shipment
</ParamField>

<ParamField body="data.attributes.shipment_tags" type="array">
  Optional array of tags to categorize shipments
</ParamField>

<ParamField body="data.relationships.customer.data.id" type="string">
  Optional ID of a party to associate with this tracking request as the customer
</ParamField>

<ParamField body="data.relationships.customer.data.type" type="string">
  Must be `party` if customer relationship is included
</ParamField>

## Response

Tracking requests are processed asynchronously. The initial response indicates the request has been accepted, but does not confirm successful tracking. To be notified of tracking status changes, configure a webhook for `tracking_request.succeeded` and `tracking_request.failed` events.

### Response Status Codes

| Status Code | Description |
| ----------- | ----------- |
| 201 | Successfully created tracking request |
| 401 | Unauthorized - Invalid API key |
| 422 | Validation error - Invalid request parameters |
| 429 | Rate limit exceeded |
| 500 | Server error |

### Response Fields

<ResponseField name="data.id" type="string">
  Unique identifier for the tracking request. Store this to check status later.
</ResponseField>

<ResponseField name="data.type" type="string">
  Resource type, always "tracking_request".
</ResponseField>

<ResponseField name="data.attributes.request_number" type="string">
  The tracking reference number you provided.
</ResponseField>

<ResponseField name="data.attributes.request_type" type="string">
  The tracking reference type you provided.
</ResponseField>

<ResponseField name="data.attributes.scac" type="string">
  The SCAC code of the carrier.
</ResponseField>

<ResponseField name="data.attributes.status" type="string">
  Current status of the tracking request. Possible values:
  - `pending`: Request is being processed
  - `succeeded`: Container/shipment located and tracking established
  - `failed`: Unable to track the shipment (see failed_reason)
  - `awaiting_manifest`: Bill of lading is valid but not yet available in the carrier's system
  - `tracking_stopped`: Tracking has been stopped for this request
</ResponseField>

<ResponseField name="data.attributes.failed_reason" type="string">
  If status is "failed", this field provides the reason. Common values:
  - `duplicate`: Shipment already exists in Terminal49
  - `not_found`: Shipping line couldn't find the tracking number
  - `retries_exhausted`: Maximum retries reached without success
  - `invalid_number`: Improperly formatted tracking number

  <Note>
    See the [Tracking Request Lifecycle](/api-docs/in-depth-guides/tracking-request-lifecycle) guide for a complete list of failure reasons.
  </Note>
</ResponseField>

<ResponseField name="data.attributes.created_at" type="string">
  ISO-8601 timestamp of when the tracking request was created.
</ResponseField>

<ResponseField name="data.attributes.updated_at" type="string">
  ISO-8601 timestamp of when the tracking request was last updated.
</ResponseField>

<ResponseField name="data.relationships.tracked_object" type="object">
  When the tracking request succeeds, this contains a reference to the created shipment.

  <Expandable title="Properties">
    <ResponseField name="data.id" type="string">
      ID of the linked shipment that you can use to retrieve full shipment details.
    </ResponseField>

    <ResponseField name="data.type" type="string">
      Always "shipment" for successful tracking requests.
    </ResponseField>
  </Expandable>
</ResponseField>

## Example Scenarios

<Tabs>
  <Tab title="Track by Bill of Lading">
    ```json title="Request"
    {
      "data": {
        "type": "tracking_request",
        "attributes": {
          "request_type": "bill_of_lading",
          "request_number": "MAEU9736478",
          "scac": "MAEU"
        }
      }
    }
    ```

    ```json title="Response"
    {
      "data": {
        "id": "b9c6a3e0-411e-4378-b93c-aacea42a673e",
        "type": "tracking_request",
        "attributes": {
          "request_type": "bill_of_lading",
          "request_number": "MAEU9736478",
          "scac": "MAEU",
          "status": "pending",
          "failed_reason": null,
          "created_at": "2023-05-15T14:23:12Z",
          "updated_at": "2023-05-15T14:23:12Z"
        },
        "relationships": {
          "tracked_object": {
            "data": null
          }
        }
      }
    }
    ```

    **Notes:**
    - The bill of lading is typically the most reliable identifier for tracking shipments.
    - The `status` will initially be `pending` while Terminal49 processes your request.
    - Once processing completes, you'll receive a webhook notification and the status will change to `succeeded` or `failed`.
  </Tab>

  <Tab title="Track by Container Number">
    ```json title="Request"
    {
      "data": {
        "type": "tracking_request",
        "attributes": {
          "request_type": "container",
          "request_number": "MSCU1234567",
          "scac": "MSCU"
        }
      }
    }
    ```

    ```json title="Response"
    {
      "data": {
        "id": "f7c9b5d2-311e-4378-a91c-bbcea42a785f",
        "type": "tracking_request",
        "attributes": {
          "request_type": "container",
          "request_number": "MSCU1234567",
          "scac": "MSCU",
          "status": "pending",
          "failed_reason": null,
          "created_at": "2023-05-15T15:45:22Z",
          "updated_at": "2023-05-15T15:45:22Z"
        },
        "relationships": {
          "tracked_object": {
            "data": null
          }
        }
      }
    }
    ```

    **Notes:**
    - Container number tracking support varies between carriers. Refer to the Carrier Data Matrix to verify support.
    - Container numbers should include the carrier prefix (e.g., MSCU for MSC containers).
    - Container tracking can sometimes fail if the container is very new or not yet associated with a booking in the carrier's system.
  </Tab>

  <Tab title="Track with Customer Reference">
    ```json title="Request"
    {
      "data": {
        "type": "tracking_request",
        "attributes": {
          "request_type": "bill_of_lading",
          "request_number": "MAEU9736478",
          "scac": "MAEU",
          "ref_numbers": ["PO-12345", "INVOICE-789"],
          "shipment_tags": ["priority", "electronics"]
        },
        "relationships": {
          "customer": {
            "data": {
              "id": "a9e52f3d-2fa9-467c-8deb-09e90dac2f0b",
              "type": "party"
            }
          }
        }
      }
    }
    ```

    ```json title="Response"
    {
      "data": {
        "id": "d7e04138-b59d-4c41-9d2d-251d95bedd6e",
        "type": "tracking_request",
        "attributes": {
          "request_type": "bill_of_lading",
          "request_number": "MAEU9736478",
          "scac": "MAEU",
          "ref_numbers": ["PO-12345", "INVOICE-789"],
          "shipment_tags": ["priority", "electronics"],
          "status": "pending",
          "failed_reason": null,
          "created_at": "2023-05-15T16:12:34Z",
          "updated_at": "2023-05-15T16:12:34Z"
        },
        "relationships": {
          "tracked_object": {
            "data": null
          },
          "customer": {
            "data": {
              "id": "a9e52f3d-2fa9-467c-8deb-09e90dac2f0b",
              "type": "party"
            }
          }
        }
      }
    }
    ```

    **Notes:**
    - Reference numbers and tags help you organize and search for shipments in your system.
    - Customer association requires first [creating a party](/api-docs/api-reference/parties/create-a-party).
    - These associations will be preserved when the shipment is created after a successful tracking request.
  </Tab>

  <Tab title="Using Test Numbers">
    ```json title="Request"
    {
      "data": {
        "type": "tracking_request",
        "attributes": {
          "request_type": "bill_of_lading",
          "request_number": "TEST-TR-SUCCEEDED",
          "scac": "TEST"
        }
      }
    }
    ```

    ```json title="Response"
    {
      "data": {
        "id": "e8d7c6b5-211d-4378-a81b-aacfa42a895e",
        "type": "tracking_request",
        "attributes": {
          "request_type": "bill_of_lading",
          "request_number": "TEST-TR-SUCCEEDED",
          "scac": "TEST",
          "status": "pending",
          "failed_reason": null,
          "created_at": "2023-05-15T16:30:45Z",
          "updated_at": "2023-05-15T16:30:45Z"
        },
        "relationships": {
          "tracked_object": {
            "data": null
          }
        }
      }
    }
    ```

    **Available Test Numbers:**
    - `TEST-TR-SUCCEEDED` - Always succeeds and creates a test shipment
    - `TEST-TR-FAILED` - Always fails with a "not_found" reason
    - `TEST-TR-AWAITING-MANIFEST` - Simulates an awaiting manifest state
    - `TEST-TR-DELAYED` - Simulates a delayed processing state before succeeding

    **Notes:**
    - Using test numbers is perfect for development and testing your integration.
    - Test numbers will trigger corresponding webhook events for complete testing.
    - No actual tracking is performed with test numbers.
  </Tab>

  <Tab title="Error Handling">
    ```json title="Request"
    {
      "data": {
        "type": "tracking_request",
        "attributes": {
          "request_type": "bill_of_lading",
          "request_number": "INVALID-FORMAT",
          "scac": "UNKNOWN"
        }
      }
    }
    ```

    ```json title="Response with validation error (Status: 422)"
    {
      "errors": [
        {
          "status": "422",
          "title": "Invalid SCAC",
          "detail": "The SCAC 'UNKNOWN' is not supported.",
          "source": {
            "pointer": "/data/attributes/scac"
          }
        }
      ]
    }
    ```

    ```json title="Response with duplicate error (Status: 422)"
    {
      "errors": [
        {
          "status": "422",
          "source": {
            "pointer": "/data/attributes/request_number"
          },
          "title": "Unprocessable Entity",
          "detail": "Request number 'MAEU9736478' with scac 'MAEU' already exists in a tracking_request with a pending or created status",
          "code": "duplicate"
        }
      ]
    }
    ```

    ```json title="Response with authentication error (Status: 401)"
    {
      "errors": [
        {
          "status": "401",
          "title": "Unauthorized",
          "detail": "You need to provide a valid API key to access this resource."
        }
      ]
    }
    ```

    **Common Errors:**
    - Invalid or unsupported SCAC codes
    - Improperly formatted request numbers
    - Duplicate tracking requests (same number/SCAC combination)
    - Invalid authentication credentials
    - Rate limit exceeded
  </Tab>
</Tabs>

## Webhook Events

When creating a tracking request, you may receive the following webhook events:

<CardGroup cols={2}>
  <Card title="tracking_request.succeeded" icon="check">
    Sent when Terminal49 successfully locates your shipment and begins tracking it. The notification includes details about the created shipment and its containers.
  </Card>

  <Card title="tracking_request.failed" icon="xmark">
    Sent when Terminal49 is unable to locate your shipment after all retry attempts. Includes the failed_reason to help troubleshoot.
  </Card>

  <Card title="tracking_request.awaiting_manifest" icon="clock">
    Sent when the bill of lading number is valid but the shipment data is not yet available in the carrier's system. Terminal49 will continue checking daily.
  </Card>

  <Card title="tracking_request.tracking_stopped" icon="hand">
    Sent when tracking for this request has been manually or automatically stopped.
  </Card>
</CardGroup>

## Code Samples

<Tabs>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.terminal49.com/v2/tracking_requests" \
      -H "Authorization: Token YOUR_API_KEY" \
      -H "Content-Type: application/vnd.api+json" \
      -d '{
        "data": {
          "type": "tracking_request",
          "attributes": {
            "request_type": "bill_of_lading",
            "request_number": "MAEU9736478",
            "scac": "MAEU"
          }
        }
      }'
    ```
  </Tab>
  <Tab title="JavaScript">
    ```javascript
    const trackShipment = async () => {
      try {
        const response = await fetch('https://api.terminal49.com/v2/tracking_requests', {
          method: 'POST',
          headers: {
            'Authorization': 'Token YOUR_API_KEY',
            'Content-Type': 'application/vnd.api+json'
          },
          body: JSON.stringify({
            data: {
              type: 'tracking_request',
              attributes: {
                request_type: 'bill_of_lading',
                request_number: 'MAEU9736478',
                scac: 'MAEU'
              }
            }
          })
        });

        const result = await response.json();

        if (!response.ok) {
          console.error('Error creating tracking request:', result.errors);
          return;
        }

        console.log('Tracking request created:', result.data.id);

        // Store the tracking request ID for future reference
        const trackingRequestId = result.data.id;

        // You would typically configure a webhook to receive updates
        // rather than polling for status changes
      } catch (error) {
        console.error('Error:', error);
      }
    };

    trackShipment();
    ```
  </Tab>
  <Tab title="Python">
    ```python
    import requests
    import json

    api_key = 'YOUR_API_KEY'
    url = 'https://api.terminal49.com/v2/tracking_requests'

    headers = {
        'Authorization': f'Token {api_key}',
        'Content-Type': 'application/vnd.api+json'
    }

    payload = {
        'data': {
            'type': 'tracking_request',
            'attributes': {
                'request_type': 'bill_of_lading',
                'request_number': 'MAEU9736478',
                'scac': 'MAEU'
            }
        }
    }

    try:
        response = requests.post(url, headers=headers, data=json.dumps(payload))
        response.raise_for_status()  # Raise exception for 4XX/5XX status codes

        result = response.json()
        tracking_request_id = result['data']['id']

        print(f'Tracking request created with ID: {tracking_request_id}')
        print(f'Status: {result["data"]["attributes"]["status"]}')

    except requests.exceptions.HTTPError as err:
        print(f'HTTP Error: {err}')
        if response.status_code == 422:
            errors = response.json().get('errors', [])
            for error in errors:
                print(f'Validation error: {error.get("detail")}')
    except requests.exceptions.RequestException as err:
        print(f'Request Error: {err}')
    ```
  </Tab>
  <Tab title="Ruby">
    ```ruby
    require 'net/http'
    require 'uri'
    require 'json'

    api_key = 'YOUR_API_KEY'
    uri = URI.parse('https://api.terminal49.com/v2/tracking_requests')

    headers = {
      'Authorization' => "Token #{api_key}",
      'Content-Type' => 'application/vnd.api+json'
    }

    payload = {
      data: {
        type: 'tracking_request',
        attributes: {
          request_type: 'bill_of_lading',
          request_number: 'MAEU9736478',
          scac: 'MAEU'
        }
      }
    }

    begin
      http = Net::HTTP.new(uri.host, uri.port)
      http.use_ssl = true

      request = Net::HTTP::Post.new(uri.request_uri, headers)
      request.body = payload.to_json

      response = http.request(request)

      if response.code.to_i >= 200 && response.code.to_i < 300
        result = JSON.parse(response.body)
        tracking_request_id = result['data']['id']

        puts "Tracking request created with ID: #{tracking_request_id}"
        puts "Status: #{result['data']['attributes']['status']}"
      else
        puts "HTTP Error: #{response.code}"
        errors = JSON.parse(response.body)['errors'] rescue nil
        if errors
          errors.each do |error|
            puts "Error: #{error['detail']}"
          end
        end
      end
    rescue => e
      puts "Request failed: #{e.message}"
    end
    ```
  </Tab>
</Tabs>

## Related Resources

<CardGroup cols={2}>
  <Card title="Tracking Request Lifecycle" icon="book" href="/api-docs/in-depth-guides/tracking-request-lifecycle">
    Learn about the full lifecycle of a tracking request, including all possible statuses and failure reasons.
  </Card>
  <Card title="Setting Up Webhooks" icon="bell" href="/api-docs/in-depth-guides/webhooks">
    Learn how to set up webhooks to receive real-time notifications about your tracking requests.
  </Card>
  <Card title="Get a Tracking Request" icon="magnifying-glass" href="/api-docs/api-reference/tracking-requests/get-a-single-tracking-request">
    Check the status of an existing tracking request.
  </Card>
  <Card title="List Tracking Requests" icon="list" href="/api-docs/api-reference/tracking-requests/list-tracking-requests">
    Retrieve all tracking requests associated with your account.
  </Card>
</CardGroup>

## Best Practices

1. **Use webhooks instead of polling**: Set up webhook notifications for `tracking_request.succeeded` and `tracking_request.failed` events instead of repeatedly checking tracking request status.

2. **Provide accurate carrier information**: Include the `scac` parameter whenever possible to improve tracking success rates.

3. **Handle retries appropriately**: If a tracking request fails with certain errors (e.g., "not_found"), implement a retry strategy with increasing delays between attempts.

4. **Store reference data**: Add meaningful reference numbers and tags to make it easier to find and organize shipments in your system.

5. **Test with test numbers**: Use the test numbers (`TEST-TR-SUCCEEDED`, `TEST-TR-FAILED`) to validate your integration before using real tracking data.

6. **Handle rate limits**: Implement proper rate limit handling by incorporating backoff strategies when you receive 429 responses.

7. **Process webhooks idempotently**: Design your webhook handlers to be idempotent, as the same event may be delivered multiple times in rare circumstances.

---
title: Custom field definitions
description: Create and manage custom field definitions to add metadata to shipments and containers.
---

Custom field definitions are schemas that define the structure and validation rules for custom fields. You can create definitions for both `Shipment` and `Cargo` (container) entities.

## List custom field definitions

<ParamField path="GET" type="/api/v2/custom_field_definitions">
  Returns all custom field definitions available to your account.
</ParamField>

### Query parameters

<ParamField query="filter[entity_type]" type="string">
  Filter by entity type. Values: `Shipment` or `Cargo`.
</ParamField>

<ParamField query="filter[data_type]" type="string">
  Filter by data type.
</ParamField>

<ParamField query="filter[display_name]" type="string">
  Search by display name (prefix search).
</ParamField>

### Example request

```bash
curl -X GET "https://api.terminal49.com/v2/custom_field_definitions?filter[entity_type]=Shipment" \
  -H "Authorization: Token YOUR_API_TOKEN" \
  -H "Content-Type: application/vnd.api+json"
```

### Example response

```json
{
  "data": [
    {
      "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
      "type": "custom_field_definition",
      "attributes": {
        "entity_type": "Shipment",
        "api_slug": "purchase_order",
        "display_name": "Purchase Order",
        "description": "Customer purchase order number",
        "data_type": "short_text",
        "validation": {
          "required": true,
          "max_length": 50
        },
        "default_value": null,
        "default_format": null,
        "created_at": "2024-01-15T10:30:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      },
      "relationships": {
        "account": {
          "data": {
            "id": "account-uuid",
            "type": "account"
          }
        },
        "options": {
          "data": []
        }
      }
    }
  ]
}
```

## Get a custom field definition

<ParamField path="GET" type="/api/v2/custom_field_definitions/:id">
  Returns a single custom field definition.
</ParamField>

### Example request

```bash
curl -X GET "https://api.terminal49.com/v2/custom_field_definitions/a1b2c3d4-e5f6-7890-abcd-ef1234567890" \
  -H "Authorization: Token YOUR_API_TOKEN" \
  -H "Content-Type: application/vnd.api+json"
```

## Create a custom field definition

<ParamField path="POST" type="/api/v2/accounts/:account_id/custom_field_definitions">
  Creates a new custom field definition for your account.
</ParamField>

### Request body attributes

<ParamField body="entity_type" type="string" required>
  The entity type this field applies to. Values: `Shipment` or `Cargo`.
</ParamField>

<ParamField body="api_slug" type="string" required>
  Unique identifier for the field. Must be alphanumeric with underscores only. Cannot use reserved keywords.
</ParamField>

<ParamField body="display_name" type="string" required>
  Human-readable name for the field.
</ParamField>

<ParamField body="description" type="string">
  Optional description of the field.
</ParamField>

<ParamField body="data_type" type="string" required>
  The data type for this field. See [supported data types](#supported-data-types).
</ParamField>

<ParamField body="reference_type" type="string">
  Required if `data_type` is `reference`. Specifies the referenced entity type.
</ParamField>

<ParamField body="validation" type="object">
  Optional validation rules. Supports `required`, `pattern`, `max_length`.
</ParamField>

<ParamField body="default_format" type="string">
  Format string for numbers/dates. For numbers, specify decimal places (e.g., `"2"`). For dates, use strftime format (e.g., `"%Y-%m-%d"`).
</ParamField>

<ParamField body="default_value" type="any">
  Optional default value for the field.
</ParamField>

<ParamField body="template_id" type="string">
  Optional. Create from an existing template. When provided, you can override `display_name`, `description`, and `validation`.
</ParamField>

### Example request

```bash
curl -X POST "https://api.terminal49.com/v2/accounts/YOUR_ACCOUNT_ID/custom_field_definitions" \
  -H "Authorization: Token YOUR_API_TOKEN" \
  -H "Content-Type: application/vnd.api+json" \
  -d '{
    "data": {
      "type": "custom_field_definition",
      "attributes": {
        "entity_type": "Shipment",
        "api_slug": "customer_reference",
        "display_name": "Customer Reference",
        "description": "Internal customer reference number",
        "data_type": "short_text",
        "validation": {
          "required": true,
          "max_length": 100
        }
      }
    }
  }'
```

### Example response

```json
{
  "data": {
    "id": "b2c3d4e5-f6a7-8901-bcde-f23456789012",
    "type": "custom_field_definition",
    "attributes": {
      "entity_type": "Shipment",
      "api_slug": "customer_reference",
      "display_name": "Customer Reference",
      "description": "Internal customer reference number",
      "data_type": "short_text",
      "validation": {
        "required": true,
        "max_length": 100
      },
      "default_value": null,
      "default_format": null,
      "created_at": "2024-01-15T12:00:00Z",
      "updated_at": "2024-01-15T12:00:00Z"
    },
    "relationships": {
      "account": {
        "data": {
          "id": "account-uuid",
          "type": "account"
        }
      },
      "options": {
        "data": []
      }
    }
  }
}
```

## Update a custom field definition

<ParamField path="PATCH" type="/api/v2/custom_field_definitions/:id">
  Updates an existing custom field definition.
</ParamField>

### Example request

```bash
curl -X PATCH "https://api.terminal49.com/v2/custom_field_definitions/b2c3d4e5-f6a7-8901-bcde-f23456789012" \
  -H "Authorization: Token YOUR_API_TOKEN" \
  -H "Content-Type: application/vnd.api+json" \
  -d '{
    "data": {
      "type": "custom_field_definition",
      "attributes": {
        "display_name": "Customer Ref Number",
        "description": "Updated description"
      }
    }
  }'
```

## Delete a custom field definition

<ParamField path="DELETE" type="/api/v2/custom_field_definitions/:id">
  Soft deletes a custom field definition. This also removes all associated custom field values.
</ParamField>

### Example request

```bash
curl -X DELETE "https://api.terminal49.com/v2/custom_field_definitions/b2c3d4e5-f6a7-8901-bcde-f23456789012" \
  -H "Authorization: Token YOUR_API_TOKEN"
```

## Supported data types

| Data type | Description | Storage | Example value |
|-----------|-------------|---------|---------------|
| `short_text` | Text string | `string_value` | `"PO-12345"` |
| `number` | Numeric value | `decimal_value` | `1234.56` |
| `date` | Date only | `date_value` | `"2024-01-15"` |
| `datetime` | Date and time | `datetime_value` | `"2024-01-15T10:30:00Z"` |
| `boolean` | True/false | `boolean_value` | `true` |
| `enum` | Single selection | `string_value` | `"priority_high"` |
| `enum_multi` | Multiple selection | `string_value` | `["tag1", "tag2"]` |
| `reference` | Reference to entity | `reference_id` | Entity UUID |

## Validation rules

The `validation` attribute supports the following rules:

| Rule | Description | Example |
|------|-------------|---------|
| `required` | Field must have a value | `{"required": true}` |
| `pattern` | Regex pattern for text fields | `{"pattern": "^PO-\\d+$"}` |
| `max_length` | Maximum character length | `{"max_length": 100}` |
